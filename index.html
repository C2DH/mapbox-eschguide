<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Welcome to Esch</title>
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/thealphadollar/vanilla-i18n/src/vanilla-i18n.min.js"></script>
  <script>
  const languages = [
    "Deutsch",
    "Français"
  ];
  new vanilla_i18n (
    languages,
    opts = {
      path: window.location.pathname + "assets/vanilla-i18n",
      debug: false,
      i18n_attr_name: "vanilla-i18n",
      toggler_id: "language-layer-toggler",
      default_language: languages[0],
    }
  ).run();
  </script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #e0e8f0;
      font-size: 1em;
    }

    h2 {
      margin: 10px;
      font-size: 2.5em;
    }

    h3 {
      margin: 10px;
      font-size: 1.2em;
    }

    #menu {
      background: #e0e8f0eb;
      width:100%; /* Fixed size menu. */
      max-width:100%; /* Fixed size menu. */
      height:100%;
      display: inline-block;
      position: absolute;
      z-index: 1;
      top: 4rem;
      left: 0;
      transform: translate(100%, 0);
      transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1);
    }


    #menu.active {
      transform: translate(0);
    }

    #button-menu-toggler span.active-only {
      display: none;
    }
    #button-menu-toggler.active span{
      display: none;
    }
    #button-menu-toggler.active span.active-only {
      display: block;
    }

    #map {
      position: absolute;
      top: 4rem;
      bottom: 0;
      width: 100%;
    }

    /* .map-overlay {
      position: absolute;
      top: 2.5rem;
      left: 2.5rem;
      background: rgba(5, 122, 240, 0.4);
      font-family: "Open Sans", sans-serif;
      color: #ffffff;
      #dee2e6
      overflow: auto;
    } */

    .header {
      height: 4rem;
    }

    .header h1 {
      font-size: 1rem;
    }
    /* Medium devices (tablets, 768px and up) */
    @media (min-width: 768px) {
      #map {
        top: 1;
      }
    }
  </style>
</head>

<body>
  <nav id="menu" class="p-3">
    <div class="d-flex flex-row flex-row-reverse bd-highlight mb-1">
    <div class="p-2 bd-highlight">
      <select class="form-select form-select-sm dropdown-toggle" type="button" id="language-layer-toggler">
      <option value="Deutsch">DE</option>
      <option value="Français">FR</option>
      </select>
    </div>
  </div>




    <div class="menu-layers">
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_1" id="layerSwitch1">
        <i18n vanilla-i18n="tour.title.1">1. Le Vieil Esch</i18n>
        <label style="color:#32bd00;">⬤</label>
      </div>
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_2" id="layerSwitch2">
        <i18n vanilla-i18n="tour.title.2">2. Metzeschmelz-Tour</i18n>
        <label style="color:#fdec08;" >⬤</label>
      </div>
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_3" id="layerSwitch3">
        <i18n vanilla-i18n="tour.title.3">3. Esch Belle Époque</i18n>
        <label style="color:#ca0202;" >⬤</label>
      </div>
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_4" id="layerSwitch4">
        <i18n vanilla-i18n="tour.title.4">4. Les logements Gelsenkirchen et ARBED</i18n>
        <label style="color:#ed029b;" >⬤</label>
      </div>
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_5" id="layerSwitch5">
        <i18n vanilla-i18n="tour.title.5">5. Esch Art déco et moderniste</i18n>
        <label style="color:#dd00e0;" >⬤</label>
      </div>
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_6" id="layerSwitch6">
        <i18n vanilla-i18n="tour.title.6">6. Esch Saveurs d’Italie</i18n>
        <label style="color:#3003fc;" >⬤</label>
      </div>
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_7" id="layerSwitch7">
        <i18n vanilla-i18n="tour.title.7">7. Sur les traces de Paul Flesch</i18n>
        <label style="color:#3d7eb8;" >⬤</label>

      </div>
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_8" id="layerSwitch8">
        <i18n vanilla-i18n="tour.title.8">8. De la Hiehl au Ellergronn</i18n>
        <label style="color:#299bff;" >⬤</label>

      </div>
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_9" id="layerSwitch9">
        <i18n vanilla-i18n="tour.title.9">9. Quartier Dellhéicht</i18n>
        <label style="color:#00b86b;" >⬤</label>

      </div>
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_10" id="layerSwitch10">
        <i18n vanilla-i18n="tour.title.10">10. Lallange années 1950-1960</i18n>
        <label style="color:#00e02d;" >⬤</label>

      </div>
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_11" id="layerSwitch11">
        <i18n vanilla-i18n="tour.title.11">11. Le renouveau urbain</i18n>
        <label style="color:#e8f000;" >⬤</label>

      </div>
      <div class="form-check form-switch m-1">
        <input class="form-check-input map-layer-toggler" type="checkbox" role="switch" unchecked data-layer="Tour_12" id="layerSwitch12">
        <i18n vanilla-i18n="tour.title.12">12. La Cité des Sciences</i18n>
        <label style="color:#ffb029;" >⬤</label>

      </div>
    </div>
  </nav>
  <div id="map"></div>
  <header class="header d-block d-flex px-2 py-1 align-items-center">
    <h1 class="flex-grow-1 m-0">
      Guide historique et architectural<br />
      <b>Esch-sur-Alzette</b>
    </h1>
    <button class="btn btn-primary btn-sm" id="button-menu-toggler">
      <span>show tours</span>
      <span class="active-only">hide tours</span>
    </button>
  </header>
  <!-- <div class="map-overlay d-none d-md-block">
    <h2>Bienvenue</h2>
    <br />
    <h3>
      Guide historique et architectural<br />
      Esch-sur-Alzette
    </h3>
  </div> -->
  <script>
    var boundariesIndex = {
      'Tour_1': {
        _sw: {
          lng: 5.981861205450658,
          lat: 49.4955627219879
        },
        _ne: {
          lng: 5.985543006250339,
          lat: 49.49849869686367
        }
      },
      'Tour_2': {
        _sw: {
          lng: 5.986582742667041,
          lat: 49.49819359380267
        },
        _ne: {
          lng: 5.989136150492207,
          lat: 49.50493209769161
        }
      },
      'Tour_3': {
        _sw: {
          lng: 5.977522231497845,
          lat: 49.491504787527894
        },
        _ne: {
          lng: 5.985162639007132,
          lat: 49.4969352763093
        }
      },
      'Tour_4': {
        _sw: {
          lng: 5.96831710941715,
          lat: 49.4894548301359
        },
        _ne: {
          lng: 5.975656749806356,
          lat: 49.504660752612956
        }
      },
      'Tour_5': {
        _sw: {
          lng: 5.974959822618449,
          lat: 49.49119032224094
        },
        _ne: {
          lng: 5.982837590336275,
          lat: 49.49607001489892
        }
      },
      'Tour_6': {
        _sw: {
          lng: 5.97580515277969,
          lat: 49.48586662426343
        },
        _ne: {
          lng: 5.979901286200036,
          lat: 49.49248464028056
        }
      },
      'Tour_7': {
        _sw: {
          lng: 5.9797834619754,
          lat: 49.491559321760555
        },
        _ne: {
          lng: 5.986794036804535,
          lat: 49.50234330787017
        }
      },
      'Tour_8': {
        _sw: {
          lng: 5.975295170910235,
          lat: 49.46724423176476
        },
        _ne: {
          lng: 5.990114505231992,
          lat: 49.48861330183593
        }
      },
      'Tour_9': {
        _sw: {
          lng: 5.977095665650133,
          lat: 49.49850019463652
        },
        _ne: {
          lng: 5.984686298260727,
          lat: 49.50177634622913
        }
      },
      'Tour_10': {
        _sw: {
          lng: 5.981393921934717,
          lat: 49.50712129165721
        },
        _ne: {
          lng: 5.994964844741864,
          lat: 49.51381669744194
        }
      },
      'Tour_11': {
        _sw: {
          lng: 5.968854399375471,
          lat: 49.49228488459035
        },
        _ne: {
          lng: 5.989138779671904,
          lat: 49.50842757961729
        }
      },
      'Tour_12': {
        _sw: {
          lng: 5.945955811283529,
          lat: 49.4995201307145
        },
        _ne: {
          lng: 5.94925610398615,
          lat: 49.503984868862744
        }
      }
    };

    mapboxgl.accessToken = "pk.eyJ1Ijoib3JpZWxpc2FyYXR1bmlsdSIsImEiOiJja2ZwMXIwcXMwZHB6MnFwYWRncDhmcGdkIn0.zPOcZlp92FqMjaB_wocPBg";
    var map = new mapboxgl.Map({
      container: "map",
      style: "mapbox://styles/orielisaratunilu/ckfwcdaxq0a8d19mx05navfuq",
      zoom: 12,
      center: [5.976816732902083, 49.493178110353789],
    });

    map.on("load", function() {


      var buttons = document.getElementsByClassName('map-layer-toggler');
      for (var i = 0, l = buttons.length; i < l; i += 1) {
        buttons[i].addEventListener('change', function(e) {
          var visibility = e.target.checked ? 'visible' : 'none';
          var tourId = String(this.dataset.layer);
          console.info('@change visibility of', this.dataset.layer, 'to', visibility);
          map.setLayoutProperty(tourId, 'visibility', visibility);
          map.setLayoutProperty('buildings_' + tourId, 'visibility', visibility);
          // if it's checked, fitToBounds
          if (e.target.checked && boundariesIndex[tourId]) {
            map.fitBounds([boundariesIndex[tourId]._sw, boundariesIndex[tourId]._ne]);
          }
        });
      }
      var triggerbutton = document.getElementById('language-layer-toggler')
      triggerbutton.addEventListener('change', function(e){
        console.log(e.target.value);
        if (e.target.value==='Français') {
          map.setLayoutProperty('FR_pages', 'visibility', 'visible')
          map.setLayoutProperty('DE_pages', 'visibility', 'none')
        } else if (e.target.value==='Deutsch') {
          map.setLayoutProperty('FR_pages', 'visibility', 'none')
          map.setLayoutProperty('DE_pages', 'visibility', 'visible')
        } else {
          console.warn(e.target.value, 'it is not recognized');
        }
      })
    })


    // Add geolocate control to the map.
    map.addControl(
      new mapboxgl.GeolocateControl({
        positionOptions: {
          enableHighAccuracy: true,
        },
        trackUserLocation: true,
      }),
      "bottom-right"
    );
  </script>
  <script>
    (function() {
      var menuElement = document.getElementById('menu');
      var buttonMenuTogglerElement = document.getElementById('button-menu-toggler');
      var isMenuElementOpen = false;
      // enable tours; only on mobile view
      buttonMenuTogglerElement.addEventListener('click', function(e) {
        isMenuElementOpen = !isMenuElementOpen;
        if (isMenuElementOpen) {
          menuElement.classList.add('active');
          buttonMenuTogglerElement.classList.add('active');
        } else {
          menuElement.classList.remove('active');
          buttonMenuTogglerElement.classList.remove('active');
        }
      })
    })()
  </script>

</body>

</html>
